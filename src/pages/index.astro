---
import BaseLayout from "../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
import LottieAnimation from "astro-integration-lottie/Lottie.astro";
import { SITE_TITLE, SITE_DESCRIPTION, SITE_HEROIMAGE } from "../consts";
import heroRendering from "../assets/multistory-timber-building.jpg";
import Button from "../components/Button.astro";
import ThreePillarsHorizontal from "../components/ThreePillarsHorizontal.astro";
import ThreePillarsVertical from "../components/ThreePillarsVertical.astro";
import Cover from "../components/Cover.astro";
import BuildCarousel from "../components/BuildCarousel/BuildCarousel.astro";
import BlogCarousel from "../components/BlogCarousel/BlogCarousel.astro";
import bsTeam from "../assets/buildsystems-team.jpg";
import ExpandButton from "../components/ExpandButton.astro";
import { getAllPosts } from "../lib/notion/client";

const posts = await getAllPosts();
---

<BaseLayout
  title={SITE_TITLE}
  description={SITE_DESCRIPTION}
  heroImage={SITE_HEROIMAGE}
  current=""
>
  <Cover />

  <Image
    class="hero-image"
    src={heroRendering}
    alt="Rendering of a multi-story timber building"
    widths={[300, 700, 1000, 1280, 1400, 1600, heroRendering.width]}
    sizes={`(max-width: 300px) 300px, (max-width: 700px) 700px, (max-width: 1000px) 1000px, (max-width: 1280px) 1280px, (max-width: 1400px) 1400px, (max-width: 1600px) 1600px, ${heroRendering.width}px`}
    loading="eager"
  />

  <div class="frame primary-font-size primary-height primary-margin-top">
    <h2 class="sticky">
      gestaltet Systeme, Prozesse und Räume – für lebenswerte Städte und
      klimafreundliche Gebäude.
    </h2>
  </div>
  <div class="frame msg-secondary">
    <p>
      Gemeinsam mit Projektentwickler:innen, Bestandshaltern und
      Stadtverwaltungen realisieren wir zukunftsfähige Immobilien und treiben
      die nachhaltige Bauwende voran. Dabei geht Innovation bei uns Hand in Hand
      mit kreativen Lösungsansätzen.
    </p>
  </div>

  <div
    aria-label="Animation: Ökologische Bautätigkeit skalieren. Ökonomische Machbarkeit und Planungssicherheit garantieren. Konformität mit ESG und Förderrichtlinien gewährleisten."
    class="animation01 horizontal"
  >
    <ThreePillarsHorizontal />
  </div>
  <div
    aria-label="Animation: Ökologische Bautätigkeit skalieren. Ökonomische Machbarkeit und Planungssicherheit garantieren. Konformität mit ESG und Förderrichtlinien gewährleisten."
    class="animation01 vertical"
  >
    <ThreePillarsVertical />
  </div>

  <div class="frame primary-font-size primary-height primary-margin-top">
    <div class="sticky">
      <h2 class="">
        ist als technologiegestützte Nachhaltigkeitsberatung Ihr
        Sparringspartner auf dem Weg zur Klimaneutralität – mit
        interdisziplinärer Kompetenz und einem ganzheitlichen Ansatz.
      </h2>
      <ExpandButton buttonText="Team" buttonLink="/team" id="01">
        Wir erschließen Potenziale der Umweltentlastung ganzheitlich. Deshalb
        beraten wir Sie toolunabhängig im interdisziplinären Team aus
        Nachhaltigkeits- und Softwarespezialisten. Deshalb entwickeln wir
        digitale Anwendungen ebenso wie Nachhaltigkeitsfahrpläne, entwerfen
        Umnutzungs- und Revitalisierungskonzepte für Bestandsgebäuden und
        begleiten Sie mit fachplanerischen Leistungen.
      </ExpandButton>
    </div>
  </div>
  <div class="frame image-text-grid">
    <div class="options-animation">
      <Image class="image" src={bsTeam} alt="BuildSystems team working" />
    </div>
    <div
      aria-label="Animation: Smart Sustainability Roadmap"
      class="animation02"
    >
      <LottieAnimation
        id="animation02"
        src="animations/five-pillars.json"
        autoplay="visible"
      />
    </div>
  </div>

  <div class="frame primary-font-size primary-height primary-margin-top">
    <div class="sticky">
      <h2 class="">
        stellt Leistungspakete maßgeschneidert zusammen und bietet Services, die
        Ihrem individuellen Bedarf entsprechen. Schema F gibt es bei uns nicht.
      </h2>
      <ExpandButton buttonText="Services" buttonLink="/services" id="02">
        Die Bauwende stellt eine der größten Herausforderungen dar, jedoch ist
        sie auch mit immensen Wachstumschancen verbunden. Wir unterstützen sie
        bei der Strategieentwicklung und -implementierung. Individuell auf Ihre
        Bedürfnisse abgestimmt, bestimmen wir Risiken, identifizieren Potentiale
        und optimieren Prozesse. Dabei treiben wir stetig die Dekarbonisierung
        des Sektors voran und ebnen den Weg zu relevanten Fördermitteln. So
        machen sich Ihre Green Assets langfristig bezahlt!
      </ExpandButton>
    </div>
  </div>

  <div class="carousel-container">
    <BuildCarousel />
  </div>
  <div class="frame primary-font-size primary-height primary-margin-top">
    <div class="sticky">
      <h2>
        erarbeitet mit langfristig durchdachten Dekarbonisierungsstrategien und
        Entwicklungsszenarien den effizientesten Weg für Sie von Braun zu Grün.
      </h2>
      <ExpandButton buttonText="Our Work" buttonLink="/ourwork" id="03">
        Unsere Arbeit bildet einen Querschnitt durch Forschung und
        Wissenstransferformaten sowie Beratungs- und Planungsleistungen. Dabei
        ist die Dekarbonisierung unserer gebauten Umwelt das verbindende Element
        all unserer Projekte, denn sie ist zur Erreichung der globalen
        Klimaziele unumgänglich. Der Fokus unserer Arbeit liegt stets darauf,
        jene Vorteile, die über die Verringerung von Emissionen hinausgehen, für
        unsere jeweiligen Kunden herauszuarbeiten und so die Wertbeständigkeit
        von Immobilien und Entwicklungen zu gewährleisten.
      </ExpandButton>
    </div>
  </div>

  <BlogCarousel posts={posts} />
  <div class="frame primary-font-size primary-height primary-margin-top">
    <div class="sticky">
      <h2>
        hilft, Herausforderungen des nachhaltigen Bauens besser zu verstehen und
        gibt Orientierung auf unbekanntem Terrain. Veränderung wird aktiv im
        Team gestaltet.
      </h2>
      <ExpandButton buttonText="Workshops" buttonLink="/workshops" id="04">
        Wir haben unseren Fit For Future Ansatz als ein Weiterbildungsformat
        rund um die Herausforderungen nachhaltiger Projektentwicklung und
        unternehmensstrategische Dekarbonisierung konzipiert. In analogen
        Modulen lernen die Teilnehmenden, worauf es bei der Entwicklung von
        zukunftsfähigen, lebenswerten und gemischten Quartieren und Gebäuden
        ankommt und wie Unternehmen diese Ansätze auf Unternehmensebene
        verankern. Managen Sie in Zukunft die verschiedenen Stellschrauben der
        Nachhaltigkeit ganzheitlich und verstehen Sie, welche Maßnahmen
        tatsächlich einen positiven Impact schaffen.
      </ExpandButton>
    </div>
  </div>

  <div class="frame workshop-cards">
    <img
      class="svg-action-card"
      src="/assets/action-card-qualitaetsprofil.svg"
      alt="Action Card Qualitätsprofil"
    />
    <img
      class="svg-action-card"
      src="/assets/action-card-emissionsprofil.svg"
      alt="Action Card Emissionsprofil"
    />
    <img
      class="svg-action-card"
      src="/assets/action-card-zirkularitaetsprofil.svg"
      alt="Action Card Zirkularitätsprofil"
    />
  </div>
</BaseLayout>

<script>
  // Script for ExpandButton component
  const textsExpandButtons = document.querySelectorAll(
    ".more-text"
  ) as NodeListOf<HTMLElement>;

  textsExpandButtons.forEach((text, i) => {
    const button = document.getElementById("expand-button-0" + (i + 1))!;
    button.addEventListener("click", () => {
      if (text.style.height === "max-content") {
        text.style.height = "1px";
        button.innerHTML = "+";
      } else {
        text.style.height = "max-content";
        button.innerHTML = "−";
      }
    });
  });
</script>

<style>
  .hero-image {
    position: relative;
    top: 0;
    left: 0;
    min-height: 105svh;
    object-fit: cover;
    -webkit-mask-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 1) 90%,
      rgba(0, 0, 0, 0)
    );
    mask-image: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 1) 90%,
      rgba(0, 0, 0, 0)
    );
    z-index: 2;
    user-select: none;
  }

  .animation01 {
    width: 100%;
    padding-top: 2rem;
    padding-bottom: 2rem;
    padding-left: var(--left-padding-general);
    padding-right: var(--right-padding-general);
  }

  .animation01.vertical {
    display: none;
  }

  .carousel-container {
    min-height: 30svh;
    width: 100%;
    padding-left: var(--left-padding-general);
    padding-right: var(--right-padding-general);
  }

  .animation02 {
    margin-top: -2rem;
    margin-bottom: -4rem;
    width: 100%;
  }

  .workshop-cards {
    width: calc(
      100% - var(--left-padding-general) - var(--right-padding-general)
    );
    display: flex;
    justify-content: space-around;
    align-items: center;
    margin-top: 4rem;
  }

  .svg-action-card {
    width: clamp(80px, 20svw, 300px);
    justify-self: center;
  }

  .image {
    border-radius: var(--card-border-radius);
  }

  @media (max-width: 1280px) {
    .animation01 {
      padding-left: calc(var(--left-padding-desktop) - 40px);
      padding-right: 5%;
    }

    .carousel-container {
      padding-left: var(--left-padding-desktop);
      padding-right: var(--right-padding-desktop);
    }

    .workshop-cards {
      width: calc(
        100% - var(--left-padding-desktop) - var(--right-padding-desktop)
      );
    }
  }

  @media (max-width: 920px) {
    .animation01 {
      padding-left: var(--left-padding-tablet);
    }

    .carousel-container {
      padding-left: var(--left-padding-tablet);
      padding-right: var(--right-padding-tablet);
    }

    .animation02 {
      padding-left: var(--left-padding-tablet);
      padding-right: var(--right-padding-tablet);
      width: 100%;
    }

    .workshop-cards {
      width: calc(
        100% - var(--left-padding-tablet) - var(--right-padding-tablet)
      );
      margin-left: var(--left-padding-tablet);
      margin-right: var(--right-padding-tablet);
    }

    .svg-action-card {
      width: clamp(80px, 26svw, 300px);
    }
  }

  @media (max-width: 625px) {
    .animation01.vertical {
      display: block;
      width: 50%;
    }

    .animation01.horizontal {
      display: none;
    }

    .carousel-container {
      padding-left: var(--left-padding-tablet);
      padding-right: var(--right-padding-tablet);
    }

    .animation02 {
      margin: 0;
    }

    .svg-action-card {
      width: clamp(80px, 28svw, 300px);
    }
  }

  @media (max-width: 420px) {
    .carousel-container {
      padding-left: var(--left-padding-mobile);
      padding-right: var(--right-padding-mobile);
    }

    .workshop-cards {
      width: calc(
        100% - var(--left-padding-mobile) - var(--right-padding-mobile)
      );
      margin-left: var(--left-padding-mobile);
      margin-right: var(--right-padding-mobile);
      margin-top: 2rem;
    }

    .svg-action-card {
      width: clamp(80px, 30svw, 300px);
    }
  }
</style>
