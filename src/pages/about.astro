---
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogCarousel from "../components/BlogCarousel/BlogCarousel.astro";
import {
  getAllOrganizations,
  getAllPeople,
  getAllPosts,
} from "../lib/notion/client";
import PersonCard from "../components/PersonCard.astro";
import StickyLogoMessage from "../components/StickyLogoMessage.astro";
import OrganizationCard from "../components/OrganizationCard.astro";

const title = "BuildSystems | Team";
const description =
  "BuildSystems erschließt Potenziale der Umweltentlastung ganzheitlich. Deshalb beraten wir Sie toolunabhängig im interdisziplinären Team aus Nachhaltigkeits- und Softwarespezialisten.";
const image = "/images/buildsystems-team-steiermark.jpg";
const imageAlt = "BuildSystems team working";

const people = await getAllPeople();

const organizations = await getAllOrganizations();

console.log(Math.floor(organizations.length / 2));
const numberOrgRows = Math.floor(organizations.length / 2);

const posts = await getAllPosts();

// gap footer

// titles:
// Team
// Partners
// Organizations

// Parterns database
// Section

// Organizations logos always flex (no grid-col-5)
---

<BaseLayout
  title={title}
  description={description}
  image={image}
  imageAlt={imageAlt}
>
  <div class="frame msg-secondary primary-margin-top">
    <h3>
      Wir vertreten nicht nur einen integralen Prozess in der Planung, wir leben
      Interdisziplinarität im Team: Jeder bringt einen Baustein der
      ganzheitlichen Betrachtung mit ein. Gemeinsam erfassen wir ökologische
      Anforderungen auf allen Ebenen und betrachten die Gesamtwirkung der
      Maßnahmen zur Emissionsreduktion durch die sozioökonomische Perspektive.
    </h3>
  </div>
  <StickyLogoMessage>
    <h2>führt Kompetenzen, Prozesse und Tools zusammen.</h2>
  </StickyLogoMessage>

  <div class="frame mb-24 grid gap-2 xl:grid-cols-2">
    {
      people.map((person) => {
        return <PersonCard item={person} />;
      })
    }
  </div>

  <div
    class="frame xs:w-[calc(100%-var(--left-padding-tablet)-var(--right-padding-tablet))] flex flex-col gap-2 object-cover sm:w-[calc(100%-var(--left-padding-desktop)-var(--right-padding-desktop))] lg:flex-row lg:flex-wrap xl:w-[calc(100%-var(--left-padding-general)-var(--right-padding-general))] 2xl:grid 2xl:grid-cols-5"
  >
    {
      organizations.map((organization) => {
        return <OrganizationCard item={organization} />;
      })
    }
  </div>
  <BlogCarousel posts={posts} />
</BaseLayout>

<style>
  .cards-container {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 0.5rem;
    z-index: 2;
    margin-bottom: 20svh;
  }

  @media (max-width: 920px) {
    .cards-container {
      grid-template-columns: repeat(1, minmax(0, 1fr));
    }
  }
</style>
